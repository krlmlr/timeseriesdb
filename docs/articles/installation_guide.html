<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Installation Guide • timeseriesdb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Installation Guide">
<meta property="og:description" content="timeseriesdb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">timeseriesdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_basic_usage.html">Basic Usage</a>
    </li>
    <li>
      <a href="../articles/a02_advanced_usage.html">Advanced Usage</a>
    </li>
    <li>
      <a href="../articles/a03_admin_usage.html">Admin Usage</a>
    </li>
    <li>
      <a href="../articles/developer_doc.html">Developer Documentation</a>
    </li>
    <li>
      <a href="../articles/installation_guide.html">Installation Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mbannert/timeseriesdb/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Installation Guide</h1>
                        <h4 class="author">Matthias Bannert and Severin Thöni</h4>
            
            <h4 class="date">2020-09-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mbannert/timeseriesdb/blob/master/vignettes/installation_guide.Rmd"><code>vignettes/installation_guide.Rmd</code></a></small>
      <div class="hidden name"><code>installation_guide.Rmd</code></div>

    </div>

    
    
<div id="starting-point" class="section level2">
<h2 class="hasAnchor">
<a href="#starting-point" class="anchor"></a>Starting Point</h2>
<p>This guides assumes you are familiar with your operating system and the R environment. In another words we assume you have basic R, basic PostgreSQL as well as basic unix shell know-how in case you work on Linux / OSX.</p>
<p>Also, {timeseriesdb}’s works well inside a docker container which is probably the most convenient setup for testing purposes if you’re familiar with docker. However, docker know-how is not a prerequisite for running and installing {timeseriesdb} by any means.</p>
</div>
<div id="installation-of-the-r-packge" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-of-the-r-packge" class="anchor"></a>Installation of the R Packge</h2>
<p>Installation of the {timeseriesdb} R package is as straight forward as for any other R package</p>
<p>from CRAN:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"timeseriesdb"</span>)</pre></body></html></div>
<p>or for the latest developer version from github (assuming you have the {remotes} package installed):</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"mbannert/timeseriesdb"</span>)</pre></body></html></div>
<p>{timeseriesdb} ships we installation routines to help you set up the database relations. Still, the database itself obviously needs to be there first and you need proper access rights before you can install the {timeseriesdb} database backend.</p>
</div>
<div id="postgresql" class="section level2">
<h2 class="hasAnchor">
<a href="#postgresql" class="anchor"></a>PostgreSQL</h2>
<p>{timseriesdb} uses the PostgreSQL RDMBS as a database backend. You can either use {timeseriesdb} with a remote database running on, e.g., <a href="https://cloud.google.com/sql/docs/postgres#:~:text=Cloud%20SQL%20for%20PostgreSQL%20is,databases%20on%20Google%20Cloud%20Platform.">Google Cloud</a>, <a href="https://aws.amazon.com/rds/postgresql/">AWS</a>, <a href="https://www.heroku.com/postgres">Heruko</a> and many more, or you can simply install PostgreSQL locally. In both cases the <a href="https://hub.docker.com/_/postgres">PostgreSQL docker images</a> are a hassle-free solution, in particular if you want to try out timeseriesdb. Alternatively, just install <a href="https://www.postgresql.org/download/">PostgreSQL on your local machine</a>. To verify that your installation worked make sure the database is running and create a basic connection.</p>
<div id="dedicated-schema-and-extensions" class="section level3">
<h3 class="hasAnchor">
<a href="#dedicated-schema-and-extensions" class="anchor"></a>Dedicated Schema and Extensions</h3>
<p>Create a SCHEMA that is dedicated to your {timeseriesdb} instance. The PostgreSQL hierarchy looks like this database cluster &gt; database &gt; schema &gt; relation (table).</p>
<p>Creating a schema is simply a matter of</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">SCHEMA</span> <span class="kw">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> timeseries;</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">CREATE</span> EXTENSION <span class="kw">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="ot">"uuid-ossp"</span>;</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">CREATE</span> EXTENSION <span class="kw">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> btree_gist;</a></code></pre></div>
<p>as long as you have the rights to do so. Also, don’t forget to install the <em>uid</em> and <em>btree</em> extension which are needed for the unique identifiers and the enforcement of constraints {timeseriesdb} makes use of.</p>
</div>
<div id="admin-and-roles" class="section level3">
<h3 class="hasAnchor">
<a href="#admin-and-roles" class="anchor"></a>Admin and Roles</h3>
<p>To create a basic set of roles run the following SQL code. The below code will create a <em>reader</em> and <em>writer</em> role as well as an admin role and three levels of access: <em>public</em>, <em>main</em> and <em>restricted</em>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">CREATE</span> <span class="kw">ROLE</span> timeseries_reader NOLOGIN;</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">ROLE</span> timeseries_writer NOLOGIN;</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">GRANT</span> timeseries_reader <span class="kw">TO</span> timeseries_writer;</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">CREATE</span> <span class="kw">ROLE</span> timeseries_access_public;</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">CREATE</span> <span class="kw">ROLE</span> timeseries_access_main;</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw">CREATE</span> <span class="kw">ROLE</span> timeseries_access_restricted;</a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">GRANT</span> timeseries_access_public <span class="kw">TO</span> timeseries_access_main;</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="kw">GRANT</span> timeseries_access_main <span class="kw">to</span> timeseries_access_restricted;</a>
<a class="sourceLine" id="cb4-10" data-line-number="10"></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="kw">CREATE</span> <span class="kw">ROLE</span> timeseries_admin NOLOGIN;</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="kw">GRANT</span> timeseries_writer <span class="kw">TO</span> timeseries_admin;</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="kw">GRANT</span> timeseries_access_restricted <span class="kw">TO</span> timeseries_admin;</a></code></pre></div>
<p>In order to setup all the relations you will need using R, create an admin user in advance who gets assigned the admin role created above:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">-- public/private distinction does not really make sense for admins</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">ROLE</span> tsdb_admin <span class="kw">WITH</span> LOGIN <span class="kw">PASSWORD</span> <span class="st">'tsdb_admin'</span>; </a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">GRANT</span> timeseries_admin <span class="kw">TO</span> tsdb_admin;</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">GRANT</span> <span class="kw">CREATE</span>, <span class="kw">USAGE</span> <span class="kw">ON</span> <span class="kw">SCHEMA</span> timeseries <span class="kw">TO</span> tsdb_admin;</a></code></pre></div>
</div>
</div>
<div id="finalize-setup-create-tables-using-r" class="section level2">
<h2 class="hasAnchor">
<a href="#finalize-setup-create-tables-using-r" class="anchor"></a>Finalize Setup: Create Tables using R</h2>
<p>Given proper access rights and a proper connection, installation of the database backend from R is just a matter of:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">timeseriesdb</span>)
<span class="no">con</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/db_connection_create.html">db_connection_create</a></span>(<span class="st">"yourdbname"</span>,
                            <span class="kw">user</span> <span class="kw">=</span> <span class="st">"tsdb_admin"</span>,
                            <span class="kw">host</span> <span class="kw">=</span> <span class="st">"localhost"</span>)
<span class="fu"><a href="../reference/install_timeseriesdb.html">install_timeseriesdb</a></span>(<span class="no">con</span>)</pre></body></html></div>
<p>YAY! You’re all set up. Store a time series to your fresh new database.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">tsl</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">AirPassengers</span> <span class="kw">=</span> <span class="no">AirPassengers</span>)
<span class="fu"><a href="../reference/db_ts_store.html">db_ts_store</a></span>(<span class="no">con</span>, <span class="no">tsl</span>)</pre></body></html></div>
</div>
<div id="docker-development-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#docker-development-setup" class="anchor"></a>Docker Development Setup</h2>
<p>If you’re familiar with docker, the easiest way to play around with {timeseriesdb} is to run the bash script that ship with {timeseriesdb}’s source code. (Note: depending on your OS and configuration, e.g., on some Ubuntu systems you’ll need use sudo to run docker.)</p>
<pre><code>./start_docker_dev.sh</code></pre>
<p>If you don’t know where R package installation directory is, simply find out by running</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="kw">package</span> <span class="kw">=</span> <span class="st">"timeseriesdb"</span>)</pre></body></html></div>
<p>or download the {timeseriesdb} package source from CRAN or GitHub. This will fire up a docker container based on a postgresql:latest docker image and set up {timeseriesdb} so you could connect to the database running inside the container like this:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">con</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/db_connection_create.html">db_connection_create</a></span>(
  <span class="kw">dbname</span> <span class="kw">=</span> <span class="st">"postgres"</span>,
  <span class="kw">user</span> <span class="kw">=</span> <span class="st">"dev_admin"</span>,
  <span class="kw">host</span> <span class="kw">=</span> <span class="st">"localhost"</span>,
  <span class="kw">passwd</span> <span class="kw">=</span> <span class="st">"dev_admin"</span>,
  <span class="kw">port</span> <span class="kw">=</span> <span class="fl">1111</span>
)</pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matthias Bannert, Severin Thöni.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
