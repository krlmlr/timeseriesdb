<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manage Time Series for Official Statistics with R and PostgreSQL • timeseriesdb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Manage Time Series for Official Statistics with R and PostgreSQL">
<meta property="og:description" content="Archive and manage times series data from official statistics. The timeseriesdb package was designed to manage a large catalog of time series from official statistics which are typically published on a monthly, quarterly or yearly basis. Thus timeseriesdb is optimized to handle updates caused by data revision as well as elaborate, multi-lingual meta information. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">timeseriesdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/developer_doc.html">timeseriesdb Developer Documentation</a>
    </li>
    <li>
      <a href="articles/get_started.html">Getting Started</a>
    </li>
    <li>
      <a href="articles/manage_timeseries_with_r_and_postgres.html">Manage Official Statistics' Time Series Data with R and PostgreSQL</a>
    </li>
    <li>
      <a href="articles/metadata.html">Manage Official Statistics' Time Series Data with R and PostgreSQL</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mbannert/timeseriesdb/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="manage-time-series-data-with-r-and-postgresql" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#manage-time-series-data-with-r-and-postgresql" class="anchor"></a>Manage Time Series Data with R and PostgreSQL</h1></div>
<p>{timeseriesdb} maps R time series objects to PostgreSQL database relations for permanent storage. Instead of writing time series to spreadsheet files or .RData files on disk, {timeseriesdb} uses a set of PostgreSQL relations which allows to store data alongside extensive, context aware, multi-lingual meta information. {timeseriesdb} was originally designed with official statistics in mind which are typically published on a monthly, quarterly or yearly basis. But the package can also handle time series of irregular frequency. As opposed to many IoT based approaches, {timeseriesdb} is not optimized to append as fast as possible but to handle data revisions such as GDP revisions.</p>
<div id="why-timeseriesdb-" class="section level2">
<h2 class="hasAnchor">
<a href="#why-timeseriesdb-" class="anchor"></a>Why {timeseriesdb} ?</h2>
<p>{timeseriesdb} …</p>
<ul>
<li>is lite weight but powerful.</li>
<li>built entirely based on license cost free open source components, mainly the R Language for Statistical Computing and PostgreSQL</li>
<li>tailored to the needs of Official and Economic Statistics, it manages
<ul>
<li>different versions (vintages) of a time series.</li>
<li>comprehensive, multi-lingual data description (meta data)</li>
<li>access rights as granular as on time series level (Row Level Security (RLS))</li>
<li>multiple administration roles and access levels in such a way that roles and access can easily be extended</li>
</ul>
</li>
<li>API ready. That is {timeseriesdb} can easily be extendend to expose a REST API to allow for language agnostic access to the data</li>
<li>easy to set up, well documented and developer friendly to extend. Being a CRAN R package, installation is a one liner. Once the R package is installed it helps to set up the database part.</li>
<li>ships with a toolbox to set up a sandbox DB using a standard docker PostgreSQL image.</li>
<li>users can compose user-specific collections of time series, similar to playlist in a music player.</li>
</ul>
</div>
<div id="what-does-timeseriesdb-not-do-" class="section level2">
<h2 class="hasAnchor">
<a href="#what-does-timeseriesdb-not-do-" class="anchor"></a>What Does {timeseriesdb} NOT DO ?</h2>
<p>{timeseriesdb} is not built to incrementally append new observations as fast as possible. {timeseriesdb} does not try to compete with the amazing speed of InfluxDB or timescale.</p>
</div>
<div id="example-use-basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#example-use-basic-usage" class="anchor"></a>Example Use (Basic Usage)</h2>
<p>The following examples illustrate basic use in a nutshell. The learn more about the use of {timeseriesdb}, visit its {pkgdown} documentation page and read the vignette articles.</p>
<div id="store-a-list-of-r-time-series-objects-to-the-database" class="section level3">
<h3 class="hasAnchor">
<a href="#store-a-list-of-r-time-series-objects-to-the-database" class="anchor"></a>Store a List of R Time Series Objects to the Database</h3>
<pre><code># Create DB connection. 
# In this case to a local db running on port 111
# w/o pw -- strongly discouraged for production. 
con &lt;- dbConnect(Postgres(),
                "dev_admin", "localhost",
                 1111, "",
                "postgres")
tsl &lt;- list(ts1 = ts(rnorm(100), frequency = 12,
                     start = 2002),
            ts2 = ts(rnorm(100), frequency = 12,
                     start = 2001))
db_store_ts(connection, tsl)
dbDisconnect(con)</code></pre>
</div>
<div id="read-data-into-a-list-of-r-time-series-object" class="section level3">
<h3 class="hasAnchor">
<a href="#read-data-into-a-list-of-r-time-series-object" class="anchor"></a>Read Data into a list of R time Series object</h3>
<pre><code>con &lt;- dbConnect(Postgres(),
                "dev_admin", "localhost",
                 1111, "",
                "postgres")

tsl &lt;- db_read_ts(connection, c("some_ts_id","another_ts_id"))
dbDisconnect(con)</code></pre>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="the-r-package" class="section level3">
<h3 class="hasAnchor">
<a href="#the-r-package" class="anchor"></a>The R Package</h3>
<p>First install the {timeseriesdb} R package which is as straight forward as for any other R package</p>
<p>from CRAN:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("timeseriesdb")</a></code></pre>
<p>from github (latest developer version):</p>
<pre><code><a href="https://devtools.r-lib.org//reference">library(devtools)
install_github("mbannert/timeseriesdb")
</a></code></pre>
</div>
<div id="the-database-backend" class="section level3">
<h3 class="hasAnchor">
<a href="#the-database-backend" class="anchor"></a>The Database Backend</h3>
<p>PostgreSQL is a license costs free, open source Relational Database Management System (DBMS). <a href="https://www.postgresql.org/download/">Download PostgreSQL</a> from the official website and follow installation instructions for your Operating System.</p>
<p>Choose one of the following options to run your database backend.</p>
<ol>
<li><p>Install an instance of PostgreSQL locally on your machine.</p></li>
<li><p>Just install a PostgreSQL client and connect to a remote PostgreSQL instance, running on, e.g., your IT department’s infrastructure, AWS, GPC or any other cloud.</p></li>
<li><p>Just install a PostgreSQL client and connect to a local docker container based on a basic PostgreSQL (&gt;= PG 11) image.</p></li>
</ol>
<p>Options 1 &amp; 2 are valid production options while option 3 is for testing and development purposes. If you need help getting one of the first two options to go, please check the installation guides refererred to above.</p>
<p>We will describe option 3 briefly in the following paragraphs. Note that you will have a slight advantages running this option when you just clone the git repository from mbannert/timeseriesdb as opposed to just installing the R package. Start the cloned repo as an R Studio project to benefit from the setup scripts inst/sql without looking for them in the installation path.</p>
<p>Download Docker Desktop and make sure it is running. Switch to your command line (terminal, powershell etc.) and pull a standard PostgreSQL image from Docker Hub.</p>
<pre><code>docker pull postgresql-latest</code></pre>
<p>Now run</p>
<pre><code>docker stop timeseriesdb_dev
docker run --rm -d -p 1111:5432 --name timeseriesdb_dev  postgres:11
sleep 2</code></pre>
<p>This will stop a container with the name <em>timeseriesdb_dev</em> if one was running. Then a container running PostgreSQL 11 will be started. This container will be automatically removed once stopped. We map your local port 1111 to the containers port 5432 which is the standard port for running a PostgreSQL service.</p>
<p>Now let’s run some SQL scripts on that docker container. Make sure to you are in the inst/ folder when running these.</p>
<pre><code>psql -p 1111 -h 'localhost' -d postgres -U postgres -f sql/create_extensions.sql
psql -p 1111 -h 'localhost' -d postgres -U postgres -f sql/create_tables.sql
psql -p 1111 -h 'localhost' -d postgres -U postgres -f sql/create_functions.sql
psql -p 1111 -h 'localhost' -d postgres -U postgres -f sql/create_triggers.sql</code></pre>
<p>This will install the PostgreSQL extensions <em>uuid-ossp</em> and <em>btree_gist</em> that are necessary to run timeseriesdb. The next scripts create several tables and functions which are the heart of {timeseriesdb}. Finally some triggers are created. Check the developer documentation if you want to learn more about the inner workings of {timeseriesdb}.</p>
</div>
</div>
<div id="details" class="section level2">
<h2 class="hasAnchor">
<a href="#details" class="anchor"></a>Details</h2>
<p>For a detailed documentation, check this pkgdown documentation. The documentation contains a get-started-guide, a function reference and developer documentation.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=timeseriesdb">https://​cloud.r-project.org/​package=timeseriesdb</a>
</li>
<li>Browse source code at <br><a href="https://github.com/mbannert/timeseriesdb/">https://​github.com/​mbannert/​timeseriesdb/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/mbannert/timeseriesdb/issues">https://​github.com/​mbannert/​timeseriesdb/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>'Matthias Bannert' <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by 'Matthias Bannert'.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
