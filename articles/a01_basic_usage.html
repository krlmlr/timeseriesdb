<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Usage • timeseriesdb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic Usage">
<meta property="og:description" content="timeseriesdb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">timeseriesdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_basic_usage.html">Basic Usage</a>
    </li>
    <li>
      <a href="../articles/a02_advanced_usage.html">Advanced Usage</a>
    </li>
    <li>
      <a href="../articles/a03_admin_usage.html">Admin Usage</a>
    </li>
    <li>
      <a href="../articles/developer_doc.html">Developer Documentation</a>
    </li>
    <li>
      <a href="../articles/installation_guide.html">Installation Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mbannert/timeseriesdb/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic Usage</h1>
            <h3 class="subtitle">Getting Started</h3>
                        <h4 class="author">Matthias Bannert and Severin Thöni</h4>
            
            <h4 class="date">2020-08-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mbannert/timeseriesdb/blob/master/vignettes/a01_basic_usage.Rmd"><code>vignettes/a01_basic_usage.Rmd</code></a></small>
      <div class="hidden name"><code>a01_basic_usage.Rmd</code></div>

    </div>

    
    
<div id="starting-point" class="section level2">
<h2 class="hasAnchor">
<a href="#starting-point" class="anchor"></a>Starting Point</h2>
<p>This guide assumes you have installed the {timeseriesdb} R package and a local PostgreSQL client library successfully. We also assume that you have a PostgreSQL database running somewhere that you can connect to. (<em>For the remainder of this guide we assume PostgreSQL runs on a local docker container accessible via port 1111.</em>)</p>
</div>
<div id="general-note" class="section level2">
<h2 class="hasAnchor">
<a href="#general-note" class="anchor"></a>General Note</h2>
<p>In {timeseriesdb}, functions to interact with the database use the <code>db_</code> prefix. Basic read and store functions are an exception to this rule as they should be easy to find front and center. As opposed to that more complex, less common operations rather ask for organization in a group functions.</p>
</div>
<div id="create-a-database-connection" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-database-connection" class="anchor"></a>Create a Database Connection</h2>
<p>No matter whether you want to read or write, you’ll need a database connection. {timeseriesdb} offers a simple wrapper function around {DBI}’s more universal <code>dbConnect</code>:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">con</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/db_create_connection.html">db_create_connection</a></span>(
  <span class="kw">dbname</span> <span class="kw">=</span> <span class="st">"postgres"</span>,
  <span class="kw">user</span> <span class="kw">=</span> <span class="st">"dev_admin"</span>,
  <span class="kw">host</span> <span class="kw">=</span> <span class="st">"localhost"</span>,
  <span class="kw">passwd</span> <span class="kw">=</span> <span class="st">"dev_admin"</span>,
  <span class="kw">port</span> <span class="kw">=</span> <span class="fl">1111</span>
)</pre></body></html></div>
<p>The resulting PostgreSQL connection object can be passed on to all of {timeseriesdb}’s database interaction functions.</p>
</div>
<div id="store-time-series" class="section level2">
<h2 class="hasAnchor">
<a href="#store-time-series" class="anchor"></a>Store Time Series</h2>
<p>Let’s take two time series from the {datasets} R package that ships with R (monthly AirPassengers, JohnsonJohnson quarterly earnings per share) and put them into a named list. The {timeseriesdb} R package uses lists of time series or long format time series <code>data.tables</code> to store one or more time series into PostgreSQL.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">tsl</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">AirPassengers</span> <span class="kw">=</span> <span class="no">AirPassengers</span>,
            <span class="kw">JohnsonJohnson</span> <span class="kw">=</span> <span class="no">JohnsonJohnson</span>)
<span class="fu"><a href="../reference/store_time_series.html">store_time_series</a></span>(<span class="no">con</span>, <span class="no">tsl</span>, <span class="st">"main"</span>,
                  <span class="kw">schema</span> <span class="kw">=</span> <span class="st">"tsdb_test"</span>)</pre></body></html></div>
</div>
<div id="read-time-series" class="section level2">
<h2 class="hasAnchor">
<a href="#read-time-series" class="anchor"></a>Read Time Series</h2>
<p>Now let’s read the series we have just stored to the database into R again. Note that <code>read_time_series</code> returns a list of time series whose elements’ names are the time series keys (unique identifiers) from the database. In this case example we use our <a href="https://cran.r-project.org/package=tstools">{tstools}</a> package to visualize both series.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">out</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_time_series.html">read_time_series</a></span>(<span class="no">con</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"JohnsonJohnson"</span>,
                               <span class="st">"AirPassengers"</span>),
                        <span class="kw">schema</span> <span class="kw">=</span> <span class="st">"tsdb_test"</span>)

<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tstools</span>)
<span class="fu"><a href="https://rdrr.io/pkg/tstools/man/tsplot.html">tsplot</a></span>(<span class="kw">AirPassengers</span> <span class="kw">=</span> <span class="no">out</span>$<span class="no">AirPassengers</span>,
       <span class="kw">tsr</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">JohnsonJohnson</span> <span class="kw">=</span> <span class="no">out</span>$<span class="no">JohnsonJohnson</span>))</pre></body></html></div>
<p><img src="a01_basic_usage_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div id="basic-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-metadata" class="anchor"></a>Basic Metadata</h2>
<p>In {timeseriesdb}, the most basic way to store data descriptions is to assign non-translated (unlocalized) meta information at the time series level. In order to store meta information to the database, lets first create a <code>tsmeta</code> object in R.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co">#library(timeseriesdb)</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/load_all.html">load_all</a></span>()</pre></body></html></div>
<pre><code>## Loading timeseriesdb</code></pre>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">tsm</span> <span class="kw">&lt;-</span> <span class="fu">create_tsmeta</span>(
  <span class="kw">JohnsonJohnson</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Historical Quarterly earnings (dollars) per Johnson &amp; Johnson share"</span>,
    <span class="kw">source</span> <span class="kw">=</span> <span class="st">"Shumway, R. H. and Stoffer, D. S. (2000) Time Series Analysis and its Applications. Second Edition. Springer. Example 1.1"</span>
  ),
  <span class="kw">AirPassengers</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">"The classic Box &amp; Jenkins airline data. Monthly totals of international airline passengers"</span>,
    <span class="kw">source</span> <span class="kw">=</span> <span class="st">"Box, G. E. P., Jenkins, G. M. and Reinsel, G. C. (1976) Time Series Analysis, Forecasting and Control. Third Edition. Holden-Day. Series G."</span>
  )
)

<span class="no">tsm</span></pre></body></html></div>
<pre><code>## Object of class tsmeta
## $JohnsonJohnson
## Object of class meta
## title : Historical Quarterly earnings (dollars) per Johnson &amp; Johnson share
## source: Shumway, R. H. and Stoffer, D. S. (2000) Time Series Analysis and its Applications. Second Edition. Springer. Example 1.1
## 
## $AirPassengers
## Object of class meta
## title : The classic Box &amp; Jenkins airline data. Monthly totals of international airline passengers
## source: Box, G. E. P., Jenkins, G. M. and Reinsel, G. C. (1976) Time Series Analysis, Forecasting and Control. Third Edition. Holden-Day. Series G.</code></pre>
<p>Now, pass on the <code>tsmeta</code> object to the database.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu">db_store_ts_metadata</span>(<span class="no">con</span>,
                     <span class="no">tsm</span>,
                     <span class="kw">valid_from</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>(),
                     <span class="kw">schema</span> <span class="kw">=</span> <span class="st">"tsdb_test"</span>)</pre></body></html></div>
<p>Note that the default locale for the write operation is NULL. This means there is only one language and data descriptions are not translated to different languages. If you want to learn how to add localized meta information or meta information at the vintage or dataset level, please read the <a href="a02_advanced_usage.html">advanced usage vignette</a>.</p>
<p>Reading the data from the database is just as easy:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">tsm</span> <span class="kw">&lt;-</span> <span class="fu">db_read_ts_metadata</span>(<span class="no">con</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"JohnsonJohnson"</span>,
                           <span class="st">"AirPassengers"</span>),
                    <span class="kw">schema</span> <span class="kw">=</span> <span class="st">"tsdb_test"</span>)</pre></body></html></div>
</div>
<div id="advanced-use" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced-use" class="anchor"></a>Advanced Use</h2>
<p>{timeseriesdb} offers a plethora of features beyond mere storage of time series and their descriptions: {timeseriesdb} can keep track of different versions of the same time series (vintages), group time series into datasets, store user specific collection of series, manage access on time series level and manage release dates.</p>
<p>The learn more about these advanced features read the <a href="a02_advanced_usage.html">advanced usage vignette</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matthias Bannert, Severin Thöni.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
